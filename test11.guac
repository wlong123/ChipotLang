def log = @ [] in
def add_id_to_log = fun n =>
  lock (log);
  log := (n :: !log);
  unlock (log)
in
def loop = fun n =>
  if (n = 0) then
  | none
  | thread (add_id_to_log (n)); loop (n - 1)
in
loop (25);
joinall;
print (!log)